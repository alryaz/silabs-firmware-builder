{% comment %}
  Placeholder to allow defining custom head, in principle, you can add anything here, e.g. favicons:

  1. Head over to https://realfavicongenerator.net/ to add your own favicons.
  2. Customize default _includes/custom-head.html in your source directory and insert the given code snippet.
{% endcomment %}
<script
  type="text/javascript">
  var exports = {};
  let loadFlasherScript = function() {
    let flasherScript = document.createElement('script');
    flasherScript.src = 'https://unpkg.com/@nabucasa/sl-web-tools@0.10.1/dist/web/nabucasa-zigbee-flasher.js?module';
    flasherScript.type = 'module';
    document.head.appendChild(flasherScript);
  }

  if (!navigator.serial) {
    let polyfillScript = document.createElement('script');
    polyfillScript.onload = function() {
      navigator.serial = exports.serial;
      loadFlasherScript();
    }
    polyfillScript.src = 'assets/serial.js';
    polyfillScript.type = 'text/javascript';
    document.head.appendChild(polyfillScript);
  } else {
    loadFlasherScript();
  }
</script>
